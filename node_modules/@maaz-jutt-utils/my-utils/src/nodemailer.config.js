import nodemailer from "nodemailer";

/**
 * Create and return a Nodemailer transporter
 * @param {object} config - Email configuration
 * @param {string} config.host - SMTP host
 * @param {number} config.port - SMTP port
 * @param {string} config.user - Email username
 * @param {string} config.pass - Email password / app password
 * @returns {object} transporter
 */
export const createTransporter = ({ host, port, user, pass }) => {
  const transporter = nodemailer.createTransport({
    host,
    port,
    secure: port === 465, // true for 465, false for others
    auth: { user, pass },
  });

  // Verify connection
  transporter.verify((err, success) => {
    if (err) console.error("Email transporter error:", err);
    else console.log("Email transporter ready");
  });

  return transporter;
};
